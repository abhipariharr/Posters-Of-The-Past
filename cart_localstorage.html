<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Cart - Posters Of The Past</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">
  <div class="container py-5">
    <h2 class="mb-4 text-center">üõí Your Cart</h2>

    <!-- Cart items go here -->
    <div id="cartItems" class="mb-4"></div>

    <!-- Total & Checkout -->
    <div id="cartFooter" style="display:none;">
      <p id="cartTotal" class="fw-bold fs-5"></p>
      <button class="btn btn-success w-100 mb-3" onclick="document.getElementById('checkoutSection').style.display='block'">
        Proceed to Checkout
      </button>
    </div>

    <!-- Checkout Section -->
    <div id="checkoutSection" style="display: none;">
      <h4 class="mb-3">Checkout</h4>
      <form id="paymentForm">
        <div class="mb-3">
          <label for="cardNumber" class="form-label">Card Number</label>
          <input type="text" id="cardNumber" class="form-control" placeholder="1234 5678 9012 3456" required />
        </div>
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="expiry" class="form-label">Expiry</label>
            <input type="text" id="expiry" class="form-control" placeholder="MM/YY" required />
          </div>
          <div class="col-md-6 mb-3">
            <label for="cvv" class="form-label">CVV</label>
            <input type="text" id="cvv" class="form-control" placeholder="123" required />
          </div>
        </div>
        <button type="submit" class="btn btn-success w-100">Pay Now</button>
      </form>
    </div>

    <div class="text-center mt-4">
      <a href="index.html" class="btn btn-outline-secondary">‚Üê Back to Home</a>
    </div>
  </div>

<script>
  function renderCart() {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const listEl = document.getElementById('cartItems');
    const totalEl = document.getElementById('cartTotal');
    const footer = document.getElementById('cartFooter');

    if (!cart.length) {
      listEl.innerHTML = '<p>Your cart is empty.</p>';
      totalEl.textContent = '';
      footer.style.display = 'none';
      return;
    }

    listEl.innerHTML = cart.map(i => `
      <div class="d-flex align-items-center justify-content-between border rounded p-2 mb-2 cart-item" data-id="${i.id}">
        <div class="d-flex align-items-center">
          <img src="${i.img}" alt="${i.title}" style="width:80px;height:80px;object-fit:cover;border-radius:8px" class="me-3"/>
          <div>
            <h5 class="mb-1">${i.title}</h5>
            <p class="mb-1">‚Çπ${i.price}</p>
          </div>
        </div>
        <div>
          <button class="btn btn-sm btn-outline-secondary dec">‚àí</button>
          <span class="mx-2">${i.qty}</span>
          <button class="btn btn-sm btn-outline-secondary inc">+</button>
          <button class="btn btn-sm btn-outline-danger ms-2 remove">Remove</button>
        </div>
      </div>
    `).join('');

    const total = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
    totalEl.textContent = `Total: ‚Çπ${total.toFixed(2)}`;
    footer.style.display = 'block';

    // Quantity / Remove handlers
    listEl.onclick = (e) => {
      const row = e.target.closest('.cart-item');
      if (!row) return;
      const id = parseInt(row.dataset.id, 10);
      const idx = cart.findIndex(x => x.id === id);
      if (idx === -1) return;

      if (e.target.classList.contains('inc')) cart[idx].qty += 1;
      if (e.target.classList.contains('dec')) cart[idx].qty = Math.max(1, cart[idx].qty - 1);
      if (e.target.classList.contains('remove')) cart.splice(idx, 1);

      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    };
  }

  renderCart();
</script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
