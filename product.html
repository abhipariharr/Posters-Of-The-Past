<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-transparent fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">Posters Of The Past</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0" style="font-size: 18px; font-weight: 500;">
          <li class="nav-item"><a class="nav-link active me-3" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link me-3" href="hollywood.html">HollyWood</a></li>
          <li class="nav-item"><a class="nav-link me-3" href="Bollywood.html">BollyWood</a></li>
          <li class="nav-item"><a class="nav-link me-3" href="contact.html">Wear</a></li>
          <li class="nav-item">
            <a href="cart_localstorage.html" class="btn btn-outline-light">
              ðŸ›’ <span id="cartBadge" class="badge bg-danger">0</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Product container -->
  <div class="container py-5 mt-5" id="productDetails"></div>

  <!-- Products list -->
  <script src="js/product.js"></script>

  <!-- Product rendering and cart -->
  <script>
    const params = new URLSearchParams(window.location.search);
    const productId = parseInt(params.get("id"));
    const product = products.find(p => p.id === productId);

    if (product) {
      document.getElementById("productDetails").innerHTML = `
        <div class="row">
          <div class="col-md-6">
            <img src="${product.image}" class="img-fluid rounded shadow">
          </div>
          <div class="col-md-6">
            <h2>${product.name}</h2>
            <p>${product.description}</p>
            <h4 class="text-danger">â‚¹${product.price}</h4>
            <div class="d-flex align-items-center gap-2 mt-2">
              <input type="number" id="quantity" class="form-control w-25" value="1" min="1">
              <button class="btn btn-danger" onclick="addToCart(${product.id})">Add to Cart</button>
            </div>
          </div>
        </div>
      `;
    } else {
      document.getElementById("productDetails").innerHTML = `<p>Product not found!</p>`;
    }

    function addToCart(id) {
      const qty = parseInt(document.getElementById("quantity").value) || 1;
      const selectedProduct = products.find(p => p.id === id);

      if (!selectedProduct) return;

      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      const existing = cart.find(item => item.id === id);

      if (existing) {
        existing.qty += qty;
      } else {
        cart.push({ ...selectedProduct, qty });
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      alert(`${selectedProduct.name} added to cart!`);
    }
  </script>

  <script src="js/cart.js"></script>
  <script src="js/script.js"></script>
</body>
</html>
